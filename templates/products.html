{% extends "base.html" %}
{% block content %}
<h2>Products</h2>

<form method="get">
  <label>Search: <input type="text" name="search" value="{{ search }}"></label>
  <button type="submit">Go</button>
</form>

<p>Search term: {{ search|safe }}</p> <!-- reflected XSS -->

<table border="1">
  <tr><th>Name</th><th>Price</th><th>Link</th></tr>
  {% for p in products %}
    <tr>
      <td>{{ p[1] }}</td>
      <td>{{ p[2] }}</td>
      <td><a href="{{ url_for('product_detail', product_id=p[0]) }}">View</a></td>
    </tr>
  {% endfor %}
</table>
{% endblock %}